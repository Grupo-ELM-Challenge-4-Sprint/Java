# Java

**Criação das tabelas SQL**:

-- Tabela de Usuários (Sua nova versão, com ajuste no tamanho da senha se necessário)
CREATE TABLE ddd_usuario(
    id_user NUMBER(5) GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_USER PRIMARY KEY,
    cpf VARCHAR2(11) NOT NULL UNIQUE, -- CPF deve ser único
    nome VARCHAR2(100) NOT NULL,
    senha VARCHAR2(100) NOT NULL, -- Aumentei o tamanho, pois '123@Mudar' tem 9 chars, senhas podem ser maiores
    email VARCHAR2(50) NOT NULL UNIQUE, -- Email também deve ser único
    telefone VARCHAR2(16) NOT NULL,
    data_nascimento DATE NOT NULL,
    tipo_usuario VARCHAR2(10) NOT NULL CHECK (tipo_usuario IN ('PACIENTE', 'CUIDADOR')), -- Garante que só esses valores são aceitos
    cpf_paciente VARCHAR2(11),  -- CPF do paciente vinculado (para cuidadores)
    cpf_cuidador VARCHAR2(11),  -- CPF do cuidador vinculado (para pacientes)
    CONSTRAINT FK_PACIENTE FOREIGN KEY (cpf_paciente) REFERENCES ddd_usuario(cpf), -- Referencia o CPF do paciente
    CONSTRAINT FK_CUIDADOR FOREIGN KEY (cpf_cuidador) REFERENCES ddd_usuario(cpf)  -- Referencia o CPF do cuidador
);

-- Tabela de Consultas (Adaptada)
CREATE TABLE ddd_consulta(
    id_consulta NUMBER(5) GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_CONS PRIMARY KEY,
    especialidade VARCHAR2(50) NOT NULL, -- Aumentei um pouco o tamanho
    medico VARCHAR2(100),               -- Nome do médico (pode ser nullable)
    data_consulta DATE NOT NULL,         -- Nome mais claro
    hora_consulta VARCHAR2(5) NOT NULL,    -- Usar VARCHAR2 para HH:MM é mais simples que TIMESTAMP se não precisar de segundos/fuso
    tipo VARCHAR2(20) NOT NULL CHECK (tipo IN ('Presencial', 'Teleconsulta')),
    local VARCHAR2(200) NOT NULL,   -- Para endereço ou link da teleconsulta
    observacoes VARCHAR2(200),           -- Aumentei o tamanho
    status VARCHAR2(20) NOT NULL CHECK (status IN ('Agendada', 'Concluída')),
    id_user NUMBER(5) NOT NULL,          -- Chave estrangeira obrigatória
    CONSTRAINT FK_CONS_USER FOREIGN KEY (id_user) REFERENCES ddd_usuario(id_user) ON DELETE CASCADE -- Se o usuário for deletado, suas consultas também são
);

-- Tabela de Receitas (Adaptada)
CREATE TABLE ddd_receita(
    id_receita NUMBER(5) GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_RECEITA PRIMARY KEY,
    nome_medicamento VARCHAR2(100) NOT NULL, -- Nome mais claro
    frequencia_horas NUMBER(3) NOT NULL,     -- Frequência em horas (número)
    dias_semana VARCHAR2(100) NOT NULL,      -- Armazenar como string separada por vírgula (ex: "Segunda,Terca,Quarta")
    numero_dias_tratamento NUMBER(5) NOT NULL, -- Nome mais claro
    data_inicio DATE NOT NULL,
    hora_inicio VARCHAR2(5) NOT NULL,        -- Usar VARCHAR2 para HH:MM
    observacoes VARCHAR2(200),               -- Aumentei o tamanho
    status VARCHAR2(10) NOT NULL CHECK (status IN ('Ativo', 'Inativo')),
    id_user NUMBER(5) NOT NULL,              -- Chave estrangeira obrigatória
    CONSTRAINT FK_RECEITA_USER FOREIGN KEY (id_user) REFERENCES ddd_usuario(id_user) ON DELETE CASCADE -- Se o usuário for deletado, suas receitas também são
);

-- Índices para otimizar buscas por CPF (importante para login e vinculação)
CREATE INDEX idx_usuario_cpf ON ddd_usuario(cpf);
CREATE INDEX idx_usuario_cpf_paciente ON ddd_usuario(cpf_paciente);
CREATE INDEX idx_usuario_cpf_cuidador ON ddd_usuario(cpf_cuidador);

-- Índices para otimizar buscas de consultas e receitas por usuário
CREATE INDEX idx_consulta_user ON ddd_consulta(id_user);
CREATE INDEX idx_receita_user ON ddd_receita(id_user);




SELECT * FROM ddd_usuario;

SELECT * FROM ddd_consulta;

SELECT * FROM ddd_receita;
